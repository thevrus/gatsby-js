{"componentChunkName":"component---src-templates-post-js","path":"/javascript-clean-code-error-handling","result":{"pageContext":{"uri":"javascript-clean-code-error-handling/","id":"cG9zdDoxMA==","slug":"javascript-clean-code-error-handling","title":"JavaScript Clean Code: Error Handling","postId":10,"excerpt":"<p>Error handling is an important part of programs. There are many situations where our programs encounter values that are unexpected and we have to properly handle them. In this article, we’ll look at how to handle them so that errors are easily found easily and gracefully handled. Exceptions are Better than Return Codes Throwing exceptions [&hellip;]</p>\n","content":"\n<p>Error handling is an important part of programs. There are many situations where our programs encounter values that are unexpected and we have to properly handle them.</p>\n\n\n\n<p>In this article, we’ll look at how to handle them so that errors are easily found easily and gracefully handled.</p>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h1 id=\"3ff5\">Exceptions are Better than Return Codes</h1>\n\n\n\n<p>Throwing exceptions is better because they let us know that an error exists and that we have to handle it.</p>\n\n\n\n<p>Most modern programming languages have exceptions built-in, so we should throw them instead of returning an error code.</p>\n\n\n\n<p>Error codes aren’t as explicit and may be missed. Exceptions are also much cleaner since we don’t have to check all the codes that may be returned.</p>\n\n\n\n<p>For example, if we return error codes in our functions then we may have code that looks something like this:</p>\n\n\n\n<figure><iframe src=\"https://medium.com/media/814c8dd9c7dd244ad63be32bba596f65\" allowfullscreen=\"\" height=\"527\" width=\"680\"></iframe></figure>\n\n\n\n<p>We have to return all the error codes in our&nbsp;<code>setNumFruit</code>&nbsp;method. Also, before we do something after the class definition, we have to check all the error codes.</p>\n\n\n\n<p>We can throw exceptions instead:</p>\n\n\n\n<figure><iframe src=\"https://medium.com/media/5ff11c42d53e00db8eeedd298ab55c26\" allowfullscreen=\"\" height=\"571\" width=\"680\"></iframe></figure>\n\n\n\n<p>We’ve eliminated the need to check all the error codes by wrapping the code we want to run in a&nbsp;<code>try</code>&nbsp;block. Now we can just catch the error instead of checking all the error codes that may be returned.</p>\n\n\n\n<p>This is much better than checking all error codes before doing something — it’s especially important as code becomes more complex.</p>\n\n\n\n<figure class=\"wp-block-image\"><img src=\"https://miro.medium.com/max/6540/0*_oeJImio2eNzM8fz\" alt=\"\"/><figcaption>Photo by&nbsp;<a href=\"https://unsplash.com/@xoutcastx?utm_source=medium&amp;utm_medium=referral\" target=\"_blank\" rel=\"noreferrer noopener\">Taylor</a>&nbsp;on&nbsp;<a href=\"https://unsplash.com/?utm_source=medium&amp;utm_medium=referral\" target=\"_blank\" rel=\"noreferrer noopener\">Unsplash</a></figcaption></figure>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h1 id=\"1a06\">Write Try-Catch-Finally</h1>\n\n\n\n<p>We should wrap our&nbsp;<code>try</code>&nbsp;in the code that throws exceptions that we want to catch. It creates its own scope for block-scoped variables so anything declared with&nbsp;<code>let</code>&nbsp;or&nbsp;<code>const</code>&nbsp;can only be referenced in the&nbsp;<code>try</code>&nbsp;block.</p>\n\n\n\n<p>Variables declared with&nbsp;<code>var</code>&nbsp;are hoisted so that they can be referenced outside the block. We won’t get an error even if they’re referenced outside the block. This will get us&nbsp;<code>1</code>:</p>\n\n\n\n<pre class=\"wp-block-preformatted\">try {<br>  var x = 1;<br>} catch (ex) {<br>  console.error(ex);<br>}<br>console.log(x);</pre>\n\n\n\n<p>But this will get us&nbsp;<code>Uncaught ReferenceError: x is not defined</code>:</p>\n\n\n\n<pre class=\"wp-block-preformatted\">try {<br>  let x = 1;<br>} catch (ex) {<br>  console.error(ex);<br>}<br>console.log(x);</pre>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h1 id=\"830b\">Don’t Ignore Caught Errors</h1>\n\n\n\n<p>We should report our errors when they’re caught. They shouldn’t be caught and then ignored. This is because we don’t want to sweep underlying issues under the rug.</p>\n\n\n\n<p>Reporting exceptions let us know about the error and then handle it accordingly.</p>\n\n\n\n<p>The examples above, like the&nbsp;<code>console.error</code>, call in the following:</p>\n\n\n\n<pre class=\"wp-block-preformatted\">try {<br>  const error = fruitStand.setNumFruit(1);<br>  console.log(fruitStand.numFruits);<br>} catch (ex) {<br>  console.error(ex);<br>}</pre>\n\n\n\n<p>Thi s one of the ways to report the error. We can also use other libraries to report the error in a central place.</p>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h1 id=\"1b24\">Don’t Ignore Rejected Promises</h1>\n\n\n\n<p>Like any other exception, rejected promises also need to be handled. They can be handled with the callback that we pass into the&nbsp;<code>catch</code>&nbsp;method or use the&nbsp;<code>try...catch</code>&nbsp;block for&nbsp;<code>async</code>&nbsp;functions — they’re the same.</p>\n\n\n\n<p>For example, we can report the error by writing the following:</p>\n\n\n\n<pre class=\"wp-block-preformatted\">Promise.reject('fail')<br>  .catch(err =&gt; {<br>    console.error(err);<br>  })</pre>\n\n\n\n<p>Or for&nbsp;<code>async</code>&nbsp;functions we can write this:</p>\n\n\n\n<pre class=\"wp-block-preformatted\">(async () =&gt; {<br>  try {<br>    await Promise.reject('fail')<br>  } catch (err) {<br>    console.error(err);<br>  }<br>})()</pre>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h1 id=\"26fe\">Providing Context with Exceptions</h1>\n\n\n\n<p>We should provide enough context in exceptions that other developers can pinpoint the error when an exception is thrown.</p>\n\n\n\n<p>We can get a stack trace with exceptions in JavaScript, but it may not provide all the information we need.</p>\n\n\n\n<hr class=\"wp-block-separator\"/>\n\n\n\n<h1 id=\"50b1\">Conclusion</h1>\n\n\n\n<p>When we handle errors, throwing exceptions is better than returning error codes since they let us use the&nbsp;<code>try...catch</code>&nbsp;block to handle errors. This is much cleaner than checking multiple error codes.</p>\n\n\n\n<p>When we throw exceptions, we have to provide enough details to pinpoint the problem.</p>\n\n\n\n<p>We shouldn’t just ignore errors after catching them. We should at least report them so that they can be looked at.</p>\n\n\n\n<p>Finally, rejected promise errors should be handled the same way as other exceptions.</p>\n","featuredImage":null}}}